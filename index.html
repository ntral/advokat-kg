<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>–ê–¥–≤–æ–∫–∞—Ç –ö–† ‚Äî –í—Ö–æ–¥</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Mulish:wght@400;700&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Mulish',sans-serif;background:linear-gradient(135deg,#0a0e27 0%,#1a1f3a 100%);color:#e2e8f0;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:20px}
.login-box{background:rgba(26,31,58,0.95);border:1px solid rgba(255,255,255,0.1);border-radius:24px;padding:48px 40px;width:480px;max-width:100%;box-shadow:0 20px 60px rgba(0,0,0,0.5)}
.logo{width:80px;height:80px;margin:0 auto 16px;background:linear-gradient(135deg,#f59e0b,#d97706);border-radius:20px;display:flex;align-items:center;justify-content:center;font-size:36px}
h1{font-family:'Playfair Display',serif;font-size:2rem;color:#f59e0b;text-align:center;margin-bottom:8px}
.subtitle{text-align:center;color:#94a3b8;font-size:0.9rem;margin-bottom:32px}
h2{font-size:1.4rem;text-align:center;margin-bottom:24px;color:#f1f5f9}
label{display:block;color:#cbd5e1;font-size:0.85rem;font-weight:600;margin-bottom:8px;text-transform:uppercase;letter-spacing:0.5px}
input{width:100%;padding:14px 18px;background:rgba(15,23,42,0.6);border:2px solid rgba(148,163,184,0.2);border-radius:12px;color:#f1f5f9;font-size:1rem;font-family:'Mulish',sans-serif;margin-bottom:20px;transition:all 0.3s}
input:focus{outline:none;border-color:#3b82f6;background:rgba(15,23,42,0.8)}
button{width:100%;padding:16px;background:linear-gradient(135deg,#3b82f6,#2563eb);border:none;border-radius:12px;color:white;font-size:1rem;font-weight:700;cursor:pointer;transition:all 0.3s;text-transform:uppercase;letter-spacing:1px}
button:hover{transform:translateY(-2px);box-shadow:0 8px 20px rgba(59,130,246,0.4)}
button:disabled{opacity:0.5;cursor:not-allowed}
.error{background:rgba(239,68,68,0.15);border:1px solid rgba(239,68,68,0.3);color:#fca5a5;padding:12px;border-radius:10px;margin-top:16px;display:none;font-size:0.9rem}
.warning{background:rgba(245,158,11,0.1);border:1px solid rgba(245,158,11,0.2);padding:20px;border-radius:12px;margin-top:24px;font-size:0.85rem;color:#fbbf24}
.warning h3{font-size:1rem;margin-bottom:12px;color:#f59e0b;display:flex;align-items:center;gap:8px}
.warning ul{padding-left:20px;line-height:1.8}
.warning li{margin:6px 0}
.info-link{text-align:center;margin-top:16px;font-size:0.85rem}
.info-link a{color:#3b82f6;text-decoration:none;cursor:pointer}
.info-link a:hover{text-decoration:underline}
.modal{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.8);z-index:1000;padding:20px;overflow-y:auto}
.modal.open{display:flex;align-items:center;justify-content:center}
.modal-content{background:rgba(26,31,58,0.98);border:1px solid rgba(255,255,255,0.1);border-radius:20px;padding:32px;max-width:600px;width:100%;max-height:90vh;overflow-y:auto;position:relative}
.modal-close{position:absolute;top:16px;right:16px;background:transparent;border:none;color:#94a3b8;font-size:28px;cursor:pointer;padding:8px;line-height:1}
.modal-close:hover{color:#f1f5f9}
.modal h2{color:#f59e0b;margin-bottom:20px;font-size:1.5rem}
.modal h3{color:#3b82f6;margin-top:24px;margin-bottom:12px;font-size:1.1rem}
.modal p{line-height:1.7;margin-bottom:12px;color:#cbd5e1}
.modal ul,.modal ol{padding-left:24px;line-height:1.8;color:#cbd5e1;margin-bottom:16px}
.modal li{margin:8px 0}
.modal strong{color:#f59e0b}
.danger-box{background:rgba(239,68,68,0.1);border:1px solid rgba(239,68,68,0.3);padding:16px;border-radius:10px;margin:16px 0;color:#fca5a5}
.loading{display:none;text-align:center;color:#94a3b8;font-size:0.9rem;margin-top:8px}
</style>
</head>
<body>

<div class="login-box">
<div class="logo">‚öñÔ∏è</div>
<h1>–ê–¥–≤–æ–∫–∞—Ç –ö–†</h1>
<p class="subtitle">–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏–æ–Ω–Ω–æ–º—É —ç–∫–∑–∞–º–µ–Ω—É</p>
<h2>–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</h2>

<label>–ò–ú–Ø –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø</label>
<input type="text" id="username" placeholder="–í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω">

<label>–ü–ê–†–û–õ–¨</label>
<input type="password" id="password" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å" onkeypress="if(event.key==='Enter')login()">

<button id="loginBtn" onclick="login()">–í–û–ô–¢–ò</button>
<div class="loading" id="loading">–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</div>

<div class="error" id="error"></div>

<div class="warning">
<h3>‚ö†Ô∏è –ü–†–ê–í–ò–õ–ê –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø</h3>
<ul>
<li><strong>–û–¥–∏–Ω –∞–∫–∫–∞—É–Ω—Ç = –æ–¥–Ω–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ</strong></li>
<li>–ü–µ—Ä–µ–¥–∞—á–∞ –¥–æ—Å—Ç—É–ø–∞ —Ç—Ä–µ—Ç—å–∏–º –ª–∏—Ü–∞–º —Å—Ç—Ä–æ–≥–æ –∑–∞–ø—Ä–µ—â–µ–Ω–∞</li>
<li>–ü—Ä–∏ –Ω–∞—Ä—É—à–µ–Ω–∏–∏ ‚Äî –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –±–µ–∑ –≤–æ–∑–≤—Ä–∞—Ç–∞ —Å—Ä–µ–¥—Å—Ç–≤</li>
<li>–í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è</li>
</ul>
</div>

<div class="info-link">
<a onclick="openInstructions()">üìñ –ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º?</a>
</div>
</div>

<div class="modal" id="instructionsModal" onclick="if(event.target===this)closeInstructions()">
<div class="modal-content">
<button class="modal-close" onclick="closeInstructions()">√ó</button>
<h2>üìñ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é</h2>

<h3>üîê –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞</h3>
<p>–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é:</p>
<ol>
<li>–°–≤—è–∂–∏—Ç–µ—Å—å —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º</li>
<li>–û–ø–ª–∞—Ç–∏—Ç–µ –æ–±—É—á–µ–Ω–∏–µ</li>
<li>–ü–æ–ª—É—á–∏—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å</li>
<li>–í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É —Å –≤–∞—à–µ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞</li>
</ol>

<div class="danger-box">
<strong>‚ö†Ô∏è –í–ê–ñ–ù–û!</strong><br>
–í–∞—à –∞–∫–∫–∞—É–Ω—Ç –ø—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç—Å—è –∫ –ø–µ—Ä–≤–æ–º—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É, —Å –∫–æ—Ç–æ—Ä–æ–≥–æ –≤—ã –≤–æ—à–ª–∏. –í—Ö–æ–¥ —Å –¥—Ä—É–≥–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –±—É–¥–µ—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω. –ï—Å–ª–∏ –≤–∞–º –Ω—É–∂–Ω–æ —Å–º–µ–Ω–∏—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ ‚Äî –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É.
</div>

<h3>üìö –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã</h3>
<p><strong>–û–±—É—á–µ–Ω–∏–µ:</strong> –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã —Å—Ä–∞–∑—É –≤—ã–¥–µ–ª–µ–Ω—ã –∑–µ–ª–µ–Ω—ã–º. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–∞.</p>
<p><strong>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:</strong> –í—ã–±–∏—Ä–∞–π—Ç–µ –æ—Ç–≤–µ—Ç ‚Äî —Å–∏—Å—Ç–µ–º–∞ –ø–æ–∫–∞–∂–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ –≤—ã –æ—Ç–≤–µ—Ç–∏–ª–∏ –∏ –ø–æ—Å—á–∏—Ç–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É.</p>

<h3>üîç –ü–æ–∏—Å–∫ –≤–æ–ø—Ä–æ—Å–æ–≤</h3>
<p>–í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ –≤ –ø–æ–ª–µ –ø–æ–∏—Å–∫–∞ ‚Äî —Å–∏—Å—Ç–µ–º–∞ –Ω–∞–π–¥–µ—Ç –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ —ç—Ç–æ —Å–ª–æ–≤–æ.</p>

<h3>‚≠ê –ò–∑–±—Ä–∞–Ω–Ω–æ–µ</h3>
<p>–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∑–≤—ë–∑–¥–æ—á–∫—É ‚òÖ —Å–ø—Ä–∞–≤–∞ –≤–≤–µ—Ä—Ö—É –≤–æ–ø—Ä–æ—Å–∞ —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–ò–∑–±—Ä–∞–Ω–Ω–æ–µ" –≤ –º–µ–Ω—é —á—Ç–æ–±—ã –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã.</p>

<h3>‚ùå –û—à–∏–±–∫–∏</h3>
<p>–í—Å–µ –≤–æ–ø—Ä–æ—Å—ã –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –æ—Ç–≤–µ—Ç–∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤ —Ä–µ–∂–∏–º–µ <strong>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</strong> –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è. –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –∏—Ö –ø–æ–∑–∂–µ!</p>

<h3>üîÑ –ü–µ—Ä–µ–º–µ—à–∞—Ç—å</h3>
<p>–°–ª—É—á–∞–π–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –≤–æ–ø—Ä–æ—Å–æ–≤ –¥–ª—è –ª—É—á—à–µ–≥–æ –∑–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è.</p>

<h3>üåê –û—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º</h3>
<p>–ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞. –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –Ω–∞ –≤–∞—à–µ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ.</p>

<h3>üö´ –ó–∞–ø—Ä–µ—â–µ–Ω–æ</h3>
<ul>
<li>–ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å –¥—Ä—É–≥–∏–º –ª–∏—Ü–∞–º</li>
<li>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ</li>
<li>–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏–ª–∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è—Ç—å –≤–æ–ø—Ä–æ—Å—ã</li>
<li>–ü—Ä–æ–¥–∞–≤–∞—Ç—å –∏–ª–∏ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø</li>
</ul>

<div class="danger-box">
<strong>‚ö†Ô∏è –ó–∞ –Ω–∞—Ä—É—à–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª:</strong><br>
–ù–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∞–∫–∫–∞—É–Ω—Ç–∞ –±–µ–∑ –≤–æ–∑–≤—Ä–∞—Ç–∞ –æ–ø–ª–∞—Ç—ã.
</div>

<h3>üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞</h3>
<p>–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∏–ª–∏ –≤–æ–ø—Ä–æ—Å—ã ‚Äî –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É.</p>
</div>
</div>

<script type="module">
import{initializeApp}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js';
import{getDatabase,ref,get,set}from'https://www.gstatic.com/firebasejs/10.8.0/firebase-database.js';

const firebaseConfig={
apiKey:"AIzaSyBLCjON8ap7Mi0OKL1WYfKhIUuRPNgXEqQ",
authDomain:"advokat-kg.firebaseapp.com",
databaseURL:"https://advokat-kg-default-rtdb.firebaseio.com",
projectId:"advokat-kg",
storageBucket:"advokat-kg.firebasestorage.app",
messagingSenderId:"142941867206",
appId:"1:142941867206:web:f46e90d1c5b4c8ea6e0f0d"
};

const app=initializeApp(firebaseConfig);
const db=getDatabase(app);
window.db=db;
window.dbRef=ref;
window.dbGet=get;
window.dbSet=set;
</script>

<script>
function openInstructions(){
document.getElementById('instructionsModal').classList.add('open');
document.body.style.overflow='hidden';
}

function closeInstructions(){
document.getElementById('instructionsModal').classList.remove('open');
document.body.style.overflow='';
}

function getDeviceId(){
let id=localStorage.getItem('__device_id__');
if(!id){
id='device_'+Date.now()+'_'+Math.random().toString(36).substr(2,9);
localStorage.setItem('__device_id__',id);
}
return id;
}

async function login(){
const btn=document.getElementById('loginBtn');
const loading=document.getElementById('loading');
const u=document.getElementById('username').value.toLowerCase().trim();
const p=document.getElementById('password').value;
const err=document.getElementById('error');

if(!u||!p){
err.textContent='‚ùå –í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å';
err.style.display='block';
return;
}

btn.disabled=true;
loading.style.display='block';
err.style.display='none';

try{
// –ü—Ä–æ–≤–µ—Ä–∫–∞ admin –ª–æ–∫–∞–ª—å–Ω–æ
if(u==='admin'&&p==='advokat2025'){
sessionStorage.setItem('user',u);
window.location.href='app.html';
return;
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ Firebase
const userRef=window.dbRef(window.db,'users/'+u);
const snapshot=await window.dbGet(userRef);

if(!snapshot.exists()){
err.textContent='‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å';
err.style.display='block';
btn.disabled=false;
loading.style.display='none';
return;
}

const userData=snapshot.val();

if(userData.password!==p){
err.textContent='‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å';
err.style.display='block';
btn.disabled=false;
loading.style.display='none';
return;
}

if(userData.blocked){
err.innerHTML='üö´ –≠—Ç–æ—Ç –∞–∫–∫–∞—É–Ω—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω.<br><small>–û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É.</small>';
err.style.display='block';
btn.disabled=false;
loading.style.display='none';
return;
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
const deviceId=getDeviceId();
if(userData.device&&userData.device!==deviceId){
err.innerHTML='üîí –≠—Ç–æ—Ç –∞–∫–∫–∞—É–Ω—Ç –ø—Ä–∏–≤—è–∑–∞–Ω –∫ –¥—Ä—É–≥–æ–º—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É.<br><small>–î–ª—è —Å–º–µ–Ω—ã —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É.</small>';
err.style.display='block';
btn.disabled=false;
loading.style.display='none';
return;
}

// –ü—Ä–∏–≤—è–∑–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
if(!userData.device){
await window.dbSet(userRef,{...userData,device:deviceId,lastLogin:new Date().toISOString()});
}else{
await window.dbSet(window.dbRef(window.db,'users/'+u+'/lastLogin'),new Date().toISOString());
}

sessionStorage.setItem('user',u);
window.location.href='app.html';

}catch(e){
console.error('Login error:',e);
err.textContent='‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç.';
err.style.display='block';
btn.disabled=false;
loading.style.display='none';
}
}

document.getElementById('username').addEventListener('keypress',function(e){
if(e.key==='Enter'){
document.getElementById('password').focus();
}
});
</script>
</body>
</html>
