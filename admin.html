<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ ‚Äî –ê–¥–≤–æ–∫–∞—Ç –ö–†</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Mulish:wght@400;700&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Mulish',sans-serif;background:linear-gradient(135deg,#0a0e27 0%,#1a1f3a 100%);color:#e2e8f0;min-height:100vh}
.header{background:rgba(26,31,58,0.8);border-bottom:1px solid rgba(148,163,184,0.2);padding:20px 24px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:16px}
.header-left{display:flex;align-items:center;gap:16px}
.logo{width:50px;height:50px;background:linear-gradient(135deg,#f59e0b,#d97706);border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:28px}
.header-title h1{font-family:'Playfair Display',serif;font-size:1.5rem;color:#f59e0b;margin-bottom:4px}
.header-title p{font-size:0.85rem;color:#94a3b8}
.header-right{display:flex;align-items:center;gap:12px}
.user-info{color:#cbd5e1;font-size:0.9rem}
.btn{padding:10px 20px;background:linear-gradient(135deg,#3b82f6,#2563eb);border:none;border-radius:8px;color:white;font-weight:600;cursor:pointer;transition:all 0.2s;font-size:0.9rem;text-decoration:none;display:inline-block}
.btn:hover{transform:translateY(-2px);box-shadow:0 4px 15px rgba(59,130,246,0.4)}
.btn-danger{background:linear-gradient(135deg,#ef4444,#dc2626)}
.btn-danger:hover{box-shadow:0 4px 15px rgba(239,68,68,0.4)}
.btn-secondary{background:rgba(148,163,184,0.2);color:#cbd5e1}
.btn-secondary:hover{background:rgba(148,163,184,0.3);box-shadow:none}
.container{max-width:1200px;margin:0 auto;padding:32px 24px}
.stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:32px}
.stat-card{background:rgba(26,31,58,0.6);border:1px solid rgba(148,163,184,0.2);border-radius:16px;padding:24px;text-align:center}
.stat-icon{font-size:2.5rem;margin-bottom:12px}
.stat-value{font-size:2rem;font-weight:700;color:#3b82f6;margin-bottom:4px}
.stat-label{font-size:0.85rem;color:#94a3b8}
.card{background:rgba(26,31,58,0.6);border:1px solid rgba(148,163,184,0.2);border-radius:16px;padding:32px;margin-bottom:24px}
.card h2{font-family:'Playfair Display',serif;font-size:1.5rem;color:#f59e0b;margin-bottom:24px;display:flex;align-items:center;gap:12px}
.form-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin-bottom:20px}
.form-group{display:flex;flex-direction:column}
.form-group label{color:#cbd5e1;margin-bottom:8px;font-weight:600;font-size:0.9rem}
.form-group input{padding:12px 16px;background:rgba(15,23,42,0.6);border:2px solid rgba(148,163,184,0.2);border-radius:10px;color:#e2e8f0;font-size:1rem;transition:all 0.2s;font-family:'Mulish',sans-serif}
.form-group input:focus{outline:none;border-color:#3b82f6;background:rgba(15,23,42,0.8)}
.form-group input::placeholder{color:#64748b}
.table-container{overflow-x:auto;margin-top:20px}
table{width:100%;border-collapse:collapse}
thead{background:rgba(15,23,42,0.6);border-bottom:2px solid rgba(148,163,184,0.2)}
th{padding:16px;text-align:left;color:#cbd5e1;font-weight:700;font-size:0.85rem;text-transform:uppercase;letter-spacing:0.5px}
td{padding:16px;border-bottom:1px solid rgba(148,163,184,0.1);color:#e2e8f0}
tbody tr{transition:background 0.2s}
tbody tr:hover{background:rgba(59,130,246,0.05)}
.badge{display:inline-block;padding:4px 12px;border-radius:12px;font-size:0.75rem;font-weight:700;text-transform:uppercase}
.badge-admin{background:rgba(245,158,11,0.2);color:#fbbf24;border:1px solid rgba(245,158,11,0.3)}
.badge-student{background:rgba(59,130,246,0.2);color:#60a5fa;border:1px solid rgba(59,130,246,0.3)}
.btn-small{padding:6px 12px;font-size:0.8rem;margin:0 4px}
.success{background:rgba(16,185,129,0.1);border:1px solid rgba(16,185,129,0.3);padding:12px 16px;border-radius:8px;color:#6ee7b7;margin-bottom:20px;display:none}
.success.show{display:block}
.error{background:rgba(239,68,68,0.1);border:1px solid rgba(239,68,68,0.3);padding:12px 16px;border-radius:8px;color:#fca5a5;margin-bottom:20px;display:none}
.error.show{display:block}
.empty-state{text-align:center;padding:60px 20px;color:#64748b}
.empty-state-icon{font-size:4rem;margin-bottom:16px;opacity:0.5}
@media(max-width:768px){
.header{padding:16px}
.header-title h1{font-size:1.25rem}
.form-grid{grid-template-columns:1fr}
.stats{grid-template-columns:1fr}
table{font-size:0.85rem}
th,td{padding:12px 8px}
.btn-small{display:block;width:100%;margin:4px 0}
}
</style>
</head>
<body>

<div class="header">
<div class="header-left">
<div class="logo">‚öñÔ∏è</div>
<div class="header-title">
<h1>–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h1>
<p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–µ—Ç–Ω—ã–º–∏ –∑–∞–ø–∏—Å—è–º–∏</p>
</div>
</div>
<div class="header-right">
<div class="user-info">üë§ <span id="adminName"></span></div>
<a href="app-with-demo.html" class="btn btn-secondary">üìö –ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é</a>
<button class="btn btn-danger" onclick="logout()">üö™ –í—ã—Ö–æ–¥</button>
</div>
</div>

<div class="container">
<div class="stats">
<div class="stat-card">
<div class="stat-icon">üë•</div>
<div class="stat-value" id="totalUsers">0</div>
<div class="stat-label">–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
</div>
<div class="stat-card">
<div class="stat-icon">üéì</div>
<div class="stat-value" id="totalStudents">0</div>
<div class="stat-label">–£—á–µ–Ω–∏–∫–æ–≤</div>
</div>
<div class="stat-card">
<div class="stat-icon">‚öôÔ∏è</div>
<div class="stat-value" id="totalAdmins">0</div>
<div class="stat-label">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤</div>
</div>
</div>

<div class="card">
<h2>‚ûï –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h2>

<div class="success" id="successMsg"></div>
<div class="error" id="errorMsg"></div>

<form onsubmit="createUser(event)">
<div class="form-grid">
<div class="form-group">
<label for="newUsername">üë§ –õ–æ–≥–∏–Ω</label>
<input type="text" id="newUsername" placeholder="student001" required>
</div>
<div class="form-group">
<label for="newName">üìù –ü–æ–ª–Ω–æ–µ –∏–º—è</label>
<input type="text" id="newName" placeholder="–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á" required>
</div>
<div class="form-group">
<label for="newPassword">üîí –ü–∞—Ä–æ–ª—å</label>
<input type="text" id="newPassword" placeholder="–ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–ª–∏ —Å–≤–æ–π" value="">
</div>
<div class="form-group">
<label for="newRole">üé≠ –†–æ–ª—å</label>
<select id="newRole" style="padding:12px 16px;background:rgba(15,23,42,0.6);border:2px solid rgba(148,163,184,0.2);border-radius:10px;color:#e2e8f0;font-size:1rem;font-family:'Mulish',sans-serif;width:100%">
<option value="student">üéì –£—á–µ–Ω–∏–∫</option>
<option value="admin">‚öôÔ∏è –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</option>
</select>
</div>
</div>
<button type="submit" class="btn" style="margin-top:12px">‚ûï –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</button>
</form>
</div>

<div class="card">
<h2>üë• –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h2>

<div class="table-container">
<table id="usersTable">
<thead>
<tr>
<th>–õ–æ–≥–∏–Ω</th>
<th>–ò–º—è</th>
<th>–ü–∞—Ä–æ–ª—å</th>
<th>–†–æ–ª—å</th>
<th>–î–µ–π—Å—Ç–≤–∏—è</th>
</tr>
</thead>
<tbody id="usersTableBody">
</tbody>
</table>
<div id="emptyState" class="empty-state" style="display:none">
<div class="empty-state-icon">üì≠</div>
<p>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ–∫–∞ –Ω–µ—Ç</p>
</div>
</div>
</div>

</div>

<script>
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
const user=sessionStorage.getItem('user');
const userRole=sessionStorage.getItem('userRole');
const userName=sessionStorage.getItem('userName');

if(!user || userRole!=='admin'){
alert('‚õî –î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω! –¢–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤.');
window.location.href='login.html';
}

document.getElementById('adminName').textContent=userName || user;

function getUsers(){
const stored=localStorage.getItem('advokat_users');
if(!stored){
const defaultUsers={'admin':{password:'admin2024',role:'admin',name:'–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä'}};
localStorage.setItem('advokat_users',JSON.stringify(defaultUsers));
return defaultUsers;
}
return JSON.parse(stored);
}

function saveUsers(users){
localStorage.setItem('advokat_users',JSON.stringify(users));
updateStats();
loadUsers();
}

function generatePassword(){
const chars='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
let password='';
for(let i=0;i<8;i++){
password+=chars.charAt(Math.floor(Math.random()*chars.length));
}
return password;
}

function createUser(event){
event.preventDefault();
const username=document.getElementById('newUsername').value.trim();
const name=document.getElementById('newName').value.trim();
let password=document.getElementById('newPassword').value.trim();
const role=document.getElementById('newRole').value;

const users=getUsers();

if(users[username]){
showError('‚ùå –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º –ª–æ–≥–∏–Ω–æ–º —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç!');
return;
}

if(!password){
password=generatePassword();
}

users[username]={password,name,role,created:new Date().toISOString()};
saveUsers(users);

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
const loginData=`üéì –î–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Ö–æ–¥–∞ –≤ —Å–∏—Å—Ç–µ–º—É "–ê–¥–≤–æ–∫–∞—Ç –ö–†"

üë§ –õ–æ–≥–∏–Ω: ${username}
üîí –ü–∞—Ä–æ–ª—å: ${password}
üìù –ò–º—è: ${name}

üåê –°—Å—ã–ª–∫–∞ –¥–ª—è –≤—Ö–æ–¥–∞:
https://ntral.github.io/advokat-kg/login.html

üìö –ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞ –¥–æ—Å—Ç—É–ø–Ω–æ:
‚úÖ –í—Å–µ 4866 –≤–æ–ø—Ä–æ—Å–æ–≤
‚úÖ –†–µ–∂–∏–º —ç–∫–∑–∞–º–µ–Ω–∞ (110 –≤–æ–ø—Ä–æ—Å–æ–≤, 110 –º–∏–Ω—É—Ç)
‚úÖ –†—É—Å—Å–∫–∏–π –∏ –∫—ã—Ä–≥—ã–∑—Å–∫–∏–π —è–∑—ã–∫–∏
‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

–£–¥–∞—á–∏ –Ω–∞ —ç–∫–∑–∞–º–µ–Ω–µ! üéì`;

navigator.clipboard.writeText(loginData).then(()=>{
showSuccess(`‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–Ω –∏ –¥–∞–Ω–Ω—ã–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!

üë§ –õ–æ–≥–∏–Ω: ${username}
üîí –ü–∞—Ä–æ–ª—å: ${password}
üìù –ò–º—è: ${name}

üìã –î–∞–Ω–Ω—ã–µ –≥–æ—Ç–æ–≤—ã –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É—á–µ–Ω–∏–∫—É —á–µ—Ä–µ–∑ Telegram/WhatsApp!`);
}).catch(()=>{
showSuccess(`‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–Ω!

üë§ –õ–æ–≥–∏–Ω: ${username}
üîí –ü–∞—Ä–æ–ª—å: ${password}
üìù –ò–º—è: ${name}

üí° –ù–∞–∂–º–∏—Ç–µ "üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ" –≤ —Ç–∞–±–ª–∏—Ü–µ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É—á–µ–Ω–∏–∫—É.`);
});

document.getElementById('newUsername').value='';
document.getElementById('newName').value='';
document.getElementById('newPassword').value='';
}

function deleteUser(username){
if(!confirm(`–£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è "${username}"?`)){
return;
}
const users=getUsers();
delete users[username];
saveUsers(users);
showSuccess(`üóëÔ∏è –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å "${username}" —É–¥–∞–ª–µ–Ω`);
}

function showSuccess(msg){
const el=document.getElementById('successMsg');
el.textContent=msg;
el.classList.add('show');
document.getElementById('errorMsg').classList.remove('show');
setTimeout(()=>el.classList.remove('show'),5000);
}

function showError(msg){
const el=document.getElementById('errorMsg');
el.textContent=msg;
el.classList.add('show');
document.getElementById('successMsg').classList.remove('show');
setTimeout(()=>el.classList.remove('show'),5000);
}

function loadUsers(){
const users=getUsers();
const tbody=document.getElementById('usersTableBody');
const emptyState=document.getElementById('emptyState');
tbody.innerHTML='';

const usernames=Object.keys(users);
if(usernames.length===0){
emptyState.style.display='block';
return;
}

emptyState.style.display='none';

usernames.forEach(username=>{
const user=users[username];
const row=document.createElement('tr');
row.innerHTML=`
<td>
<strong>${username}</strong>
<button class="btn btn-secondary btn-small" onclick="copyToClipboard('${username}','–ª–æ–≥–∏–Ω')" style="margin-left:8px">üìã</button>
</td>
<td>${user.name}</td>
<td>
<code style="background:rgba(59,130,246,0.1);padding:4px 8px;border-radius:4px;font-family:monospace">${user.password}</code>
<button class="btn btn-secondary btn-small" onclick="copyToClipboard('${user.password}','–ø–∞—Ä–æ–ª—å')" style="margin-left:8px">üìã</button>
</td>
<td><span class="badge ${user.role==='admin'?'badge-admin':'badge-student'}">${user.role==='admin'?'‚öôÔ∏è –ê–¥–º–∏–Ω':'üéì –£—á–µ–Ω–∏–∫'}</span></td>
<td>
<button class="btn btn-secondary btn-small" onclick="copyLoginData('${username}','${user.password}','${user.name}')">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
${username!=='admin'?`<button class="btn btn-danger btn-small" onclick="deleteUser('${username}')">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>`:
'<span style="color:#64748b;font-size:0.85rem">–ó–∞—â–∏—â–µ–Ω</span>'}
</td>
`;
tbody.appendChild(row);
});
}

function updateStats(){
const users=getUsers();
const usernames=Object.keys(users);
const students=usernames.filter(u=>users[u].role==='student').length;
const admins=usernames.filter(u=>users[u].role==='admin').length;

document.getElementById('totalUsers').textContent=usernames.length;
document.getElementById('totalStudents').textContent=students;
document.getElementById('totalAdmins').textContent=admins;
}

function logout(){
sessionStorage.clear();
window.location.href='login.html';
}

function copyToClipboard(text,label){
navigator.clipboard.writeText(text).then(()=>{
showSuccess(`üìã ${label.charAt(0).toUpperCase()+label.slice(1)} —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω: ${text}`);
}).catch(err=>{
// Fallback –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤
const textarea=document.createElement('textarea');
textarea.value=text;
textarea.style.position='fixed';
textarea.style.opacity='0';
document.body.appendChild(textarea);
textarea.select();
document.execCommand('copy');
document.body.removeChild(textarea);
showSuccess(`üìã ${label.charAt(0).toUpperCase()+label.slice(1)} —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω: ${text}`);
});
}

function copyLoginData(username,password,name){
const text=`üéì –î–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Ö–æ–¥–∞ –≤ —Å–∏—Å—Ç–µ–º—É "–ê–¥–≤–æ–∫–∞—Ç –ö–†"

üë§ –õ–æ–≥–∏–Ω: ${username}
üîí –ü–∞—Ä–æ–ª—å: ${password}
üìù –ò–º—è: ${name}

üåê –°—Å—ã–ª–∫–∞ –¥–ª—è –≤—Ö–æ–¥–∞:
https://ntral.github.io/advokat-kg/login.html

üìö –ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞ –¥–æ—Å—Ç—É–ø–Ω–æ:
‚úÖ –í—Å–µ 4866 –≤–æ–ø—Ä–æ—Å–æ–≤
‚úÖ –†–µ–∂–∏–º —ç–∫–∑–∞–º–µ–Ω–∞ (110 –≤–æ–ø—Ä–æ—Å–æ–≤, 110 –º–∏–Ω—É—Ç)
‚úÖ –†—É—Å—Å–∫–∏–π –∏ –∫—ã—Ä–≥—ã–∑—Å–∫–∏–π —è–∑—ã–∫–∏
‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

–£–¥–∞—á–∏ –Ω–∞ —ç–∫–∑–∞–º–µ–Ω–µ! üéì`;

navigator.clipboard.writeText(text).then(()=>{
showSuccess(`üìã –î–∞–Ω–Ω—ã–µ –¥–ª—è —É—á–µ–Ω–∏–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã! –û—Ç–ø—Ä–∞–≤—å—Ç–µ —á–µ—Ä–µ–∑ Telegram/WhatsApp`);
}).catch(err=>{
// Fallback
const textarea=document.createElement('textarea');
textarea.value=text;
textarea.style.position='fixed';
textarea.style.opacity='0';
document.body.appendChild(textarea);
textarea.select();
document.execCommand('copy');
document.body.removeChild(textarea);
showSuccess(`üìã –î–∞–Ω–Ω—ã–µ –¥–ª—è —É—á–µ–Ω–∏–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã! –û—Ç–ø—Ä–∞–≤—å—Ç–µ —á–µ—Ä–µ–∑ Telegram/WhatsApp`);
});
}

// –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
loadUsers();
updateStats();
</script>

</body>
</html>
